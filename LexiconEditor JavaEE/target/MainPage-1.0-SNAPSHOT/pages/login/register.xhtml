<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    <h:head>
        <title>Регистрация</title>
    </h:head>
    <h:body>
        <h:form id="userForm">   
            
            <p:tabMenu activeIndex="#{param.i}">
                <p:menuitem value="Вход/регистрация" outcome="/pages/login/login" icon="ui-icon-search">
                    <f:param name="i" value="0" />
                </p:menuitem>
                <p:menuitem value="О сайте" outcome="/pages/info/info" icon="ui-icon-document">
                    <f:param name="i" value="1" />
                </p:menuitem>
                <p:menuitem value="Обратная связь" outcome="/pages/feedback" icon="ui-icon-wrench">
                    <f:param name="i" value="2" />
                </p:menuitem>
            </p:tabMenu>
            
            <p:growl id="growl" life="3000" />
            <p:messages id="msgs" />
             <div class="centr">
            <h:panelGrid columns="2" border="0">
                
                <h:outputText value="Логин"/>
                <p:inputText id="logIn" value="#{registerUser.currentUser.login}" required="true"
                             requiredMessage="Поле логина пусто">
                    <p:ajax update="growl" event="keyup" />
                </p:inputText>
                
                <h:outputText value="Имя"/>
                <p:inputText id="nameIn" value="#{registerUser.currentUser.name}" required="true"
                             requiredMessage="Поле имени пусто">
                    <p:ajax update="growl" event="keyup" />
                </p:inputText>
                
                <h:outputText value="Фамилия"/>
                <p:inputText id="surnIn" value="#{registerUser.currentUser.surname}" required="true"
                              requiredMessage="Поле фамилии пусто">
                    <p:ajax update="growl" event="keyup" />
                </p:inputText>
                
                <h:outputText value="Пароль"/>
                <p:inputText id="passIn" type="password" value="#{registerUser.currentUser.password}" required="true"
                             requiredMessage="Поле пароля пусто">
                    <p:ajax update="growl" event="keyup" />
                </p:inputText>
                
                <h:outputText value="Повтор пароля"/>
                <p:inputText id="confpassIn" type="password" value="#{registerUser.currentUser.confirmation}" required="true"
                             requiredMessage="Поле подтверждения пусто">
                    <f:validator validatorId="newPasswordValidator"/>
                    <f:validateBean/>
                    <p:ajax update="msgConf" event="keyup" />
                </p:inputText>
                
               <h:outputText value="Email"/>
                <p:inputText id="emailIn"  value="#{registerUser.currentUser.email}" required="true"
                             requiredMessage="Поле email пусто">
                    <f:validator validatorId="newEmailValidator"/>
                    <f:validateBean/>
                    <p:ajax update="growl" event="keyup" />
                </p:inputText>
              
               
            </h:panelGrid>
             <p:message for="confpassIn" id="msgConf"  />
                <p:commandButton update="growl"  value="Зарегестрироваться" 
                                 action="#{registerUser.confirmation()}" actionListener="#{registerUser.addUser()}"  />
            </div>
        </h:form>
        <style>
            .centr{
                display: block;
                position: fixed;
                top: 50%;
                left: 50%;
                margin-left: -185px;
                margin-top: -105px;
                padding: 15px;
                width: 340px;
                height: 270px;
                border: 1px solid #ccc;
                box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            }
        </style>
    </h:body>
    
</html>

